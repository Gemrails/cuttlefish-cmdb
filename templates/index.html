<!--
Cuttlefish CMDB
Configuration Management Database leveraging Neo4j
Copyright (C) 2016 Brandon Tsao

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published
by the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<!DOCTYPE html>

<html>

<head>
  <meta name="viewport" content = "width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!-- JQuery -->
  <script src="//code.jquery.com/jquery-1.12.3.js"></script>

  <!-- Boostrap CDN -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

  <!-- Data tables -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.12/css/dataTables.bootstrap.min.css">
  <script src="https://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.12/js/dataTables.bootstrap.min.js"></script>
  <script>$(document).ready(function() {
    $('#assets').DataTable( {
      "order": [],
      "columnDefs": [ {
        "targets"  : 'no-sort',
        "orderable": false,
    }]
  });} );</script><!-- JQuery for datatable -->

</head>

<body class="body">


  <div class="container">
    <h1>Cuttlefish CMDB</h1>
    <div class="row">

      <div class="col-md-8">
        <h2>Asset Data</h2>

        <table id ="assets" class="table table-hover" cellspacing="0" width="100%">
          <thead>
            <tr>
              <th>Model</th>
              <th>IP</th>
              <th>Serial</th>
              <th>Owner</th>
              <th class="no-sort"></th>
            </tr>
          </thead>
          <tbody>
            {% for row in data %}
            <tr>
              <td>{{ row['a']['model'] }}</td>
              <td>{{ row['a']['ip'] }}</td>
              <td>{{ row['a']['serial'] }}</td>
              <td>{{ row['b']['name'] }}</td>
              <td>
                <div class="dropdown">
                  <button class="btn btn-primary btn-xs dropdown-toggle" type="button" data-toggle="dropdown">Inspect
                  <span class="caret"></span></button>
                  <ul class="dropdown-menu">
                    <li class="dropdown-header">View</li>
                    <li><a href="/api/return/asset/{{ row['a']['model'] }}">View Asset</a></li>
                    <li><a href="/api/return/person/{{ row['b']['name'] }}">View Owner</a></li>
                    <li class="divider"></li>
                    <li class="dropdown-header">Delete</li>
                    <li><a href="#">Delete Asset</a></li>
                  </ul>
                </div>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div> <!-- end col -->


      <div class="col-md-4">
        <h2>Add Asset</h2>

          <form method="POST" action="{{ url_for('tx') }}">
            Owner:<br/>
            <input type="text" name="owner"><br/><br/>

            Model:<br/>
            <input type="text" name="model"><br/><br/>

            <input type="submit" value="Submit">

          </form>

      </div> <!-- end col -->

    </div><!-- end row -->
  </div><!-- end container -->

</body>
</html>
