<!--
Cuttlefish CMDB
Configuration Management Database leveraging Neo4j
Copyright (C) 2016 Brandon Tsao

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published
by the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<!DOCTYPE html>

<html>

<head>
  <meta name="viewport" content = "width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!-- Boostrap / Datatables CDN -->
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs-3.3.6/jqc-1.12.3/jszip-2.5.0/pdfmake-0.1.18/dt-1.10.12/b-1.2.1/b-colvis-1.2.1/b-html5-1.2.1/b-print-1.2.1/fc-3.2.2/sc-1.4.2/datatables.min.css"/>
  <script type="text/javascript" src="https://cdn.datatables.net/v/bs-3.3.6/jqc-1.12.3/jszip-2.5.0/pdfmake-0.1.18/dt-1.10.12/b-1.2.1/b-colvis-1.2.1/b-html5-1.2.1/b-print-1.2.1/fc-3.2.2/sc-1.4.2/datatables.min.js"></script>

  <script>$(document).ready(function() {
    var table = $('#assets').DataTable( {
      "lengthChange": false,
      "buttons": [ 'excel', 'pdf', 'colvis' ],
      "order": [],
      "columnDefs": [ {
        "targets"  : 'no-sort',
        "orderable": false,
      }]
    } );

    table.buttons().container().appendTo('#assets_wrapper .col-sm-6:eq(0)');

  } );</script><!-- JQuery for datatable -->

</head>

<body class="body">

  <div class="container">
    <h1>Cuttlefish CMDB</h1>
    <div class="row">

      <div class="col-md-8">
        <h2>Asset Data</h2>

        <table id ="assets" class="table table-hover" cellspacing="0" width="100%">
          <thead>
            <tr>
              <th>Model</th>
              <th>Manufacturer</th>
              <th>IP</th>
              <th>Serial</th>
              <th>Date Issued</th>
              <th>Owner</th>
              <th class="no-sort"></th>
            </tr>
          </thead>
          <tbody>
            {% for row in data %}
            <tr>
              <td>{{ row['asset']['model'] }}</td>
              <td>{{ row['asset']['manufacturer'] }}</td>
              <td>{{ row['asset']['ip'] }}</td>
              <td>{{ row['asset']['serial'] }}</td>
              <td>{{ row['asset']['date_issued'] }}</td>
              <td>{{ row['person']['name'] }}</td>
              <td>
                <div class="dropdown">
                  <button class="btn btn-primary btn-xs dropdown-toggle" type="button" data-toggle="dropdown">Inspect
                  <span class="caret"></span></button>
                  <ul class="dropdown-menu">
                    <li class="dropdown-header">View</li>
                    <li><a href="/api/return/asset/{{ row['asset']['model'] }}">View Asset</a></li>
                    <li><a href="/api/return/person/{{ row['person']['name'] }}">View Owner</a></li>
                    <li class="divider"></li>
                    <li class="dropdown-header">Delete</li>
                    <li><a href="#">Delete Asset</a></li>
                  </ul>
                </div>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div> <!-- end col -->


      <div class="col-md-4">
        <h2>Add Asset</h2>

          <form method="POST" action="{{ url_for('tx') }}">
            Owner:<br/>
            <input type="text" name="owner"><br/><br/>

            Model:<br/>
            <input type="text" name="model"><br/><br/>

            <input type="submit" value="Submit">

          </form>

      </div> <!-- end col -->

    </div><!-- end row -->
  </div><!-- end container -->

</body>
</html>
